#npm run text 

#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Run TypeScript compiler in noEmit mode to check for errors in client and server
npx --prefix ./client tsc --noEmit --project ./client/tsconfig.json
CLIENT_TSC=$?

npx --prefix ./server tsc --noEmit --project ./server/tsconfig.json
SERVER_TSC=$?

if [ $CLIENT_TSC -ne 0 ] || [ $SERVER_TSC -ne 0 ]; then
  echo "TypeScript errors detected. Commit aborted."
  exit 1
fi

# If tsc passes, then run linting in each directory.
# If warnings or errors are thrown, husky process should exit without committing.
cd client 
# run format - to be added back in future PR
npm run lint
cd ..
cd server 
# npm run format - to be added back in future PR
npm run lint
